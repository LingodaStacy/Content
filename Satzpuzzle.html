<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Drag-and-Drop Satzspiel</title>
  <!-- Open Sans einbinden -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      padding: 2em;
      background: #fafafa;
    }
    /* Header Bereich wei√ü hinterlegen */
    h1 {
      background-color: #fff;
      padding: 0.5em;
      margin-bottom: 1em;
    }
    .sentence-container {
      margin-bottom: 2em;
      padding: 1em;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: #fff;
    }
    .sentence-container h2 {
      margin: 0 0 0.5em;
      font-size: 1.1em;
    }
    .sentence-container p.original {
      margin: 0 0 1em;
      font-weight: bold;
    }
    ul.pool, ul.target {
      list-style: none;
      padding: 0;
      margin: 0.5em 0;
      min-height: 3em;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5em;
    }
    /* Drop-Feld ohne Umrandung, stattdessen Unterstreichung */
    ul.target {
      border: none;
      border-bottom: 2px solid #153BFF;
    }
    li {
      padding: 0.5em 1em;
      background: #153BFF;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: grab;
      user-select: none;
      text-align: center;
    }
    li:active {
      cursor: grabbing;
    }
    button.check {
      padding: 0.5em 1em;
      font-size: 1em;
      margin-top: 0.5em;
      background: #153BFF;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    p.result {
      margin: 0.5em 0 0;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Ordne die S√§tze</h1>
  <div id="game"></div>

  <script>
    const sentences = [
      ["Der Hund", "l√§uft", "schnell", "√ºber", "die Wiese"],
      ["Die Katze", "schl√§ft", "den ganzen Tag"],
      ["Wir", "gehen", "morgen", "ins Kino"],
      ["Das Wetter", "ist", "heute", "sehr sch√∂n"],
      ["Meine Freunde", "spielen", "Fu√üball", "im Park"]
    ];

    function shuffle(array) {
      const a = array.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    const gameEl = document.getElementById("game");

    sentences.forEach((originalArr, si) => {
      const cont = document.createElement("div");
      cont.className = "sentence-container";

      const title = document.createElement("h2");
      title.textContent = `Satz ${si + 1}`;
      const orig = document.createElement("p");
      orig.className = "original";
      orig.textContent = "Originalsatz: " + originalArr.join(" ");

      const pool = document.createElement("ul");
      pool.className = "pool";
      const target = document.createElement("ul");
      target.className = "target";

      const btn = document.createElement("button");
      btn.className = "check";
      btn.textContent = "Pr√ºfen";
      const res = document.createElement("p");
      res.className = "result";

      cont.append(title, orig, pool, target, btn, res);
      gameEl.appendChild(cont);

      function load() {
        res.textContent = "";
        pool.innerHTML = "";
        target.innerHTML = "";

        const scrambled = shuffle(originalArr);
        scrambled.forEach((text, pi) => {
          const li = document.createElement("li");
          li.textContent = text;
          li.id = `s${si}-p${pi}`;
          li.draggable = true;
          li.addEventListener("dragstart", e => {
            e.dataTransfer.setData("text/plain", li.id);
          });
          pool.appendChild(li);
        });
      }

      function getDropIndex(container, x) {
        const children = Array.from(container.children);
        for (let i = 0; i < children.length; i++) {
          const rect = children[i].getBoundingClientRect();
          if (x < rect.left + rect.width / 2) return i;
        }
        return children.length;
      }

      [pool, target].forEach(zone => {
        zone.addEventListener("dragover", e => e.preventDefault());
        zone.addEventListener("drop", e => {
          e.preventDefault();
          const id = e.dataTransfer.getData("text/plain");
          const item = document.getElementById(id);
          const dropX = e.clientX;
          const idx = getDropIndex(zone, dropX);
          if (idx >= zone.children.length) zone.appendChild(item);
          else zone.insertBefore(item, zone.children[idx]);
        });
      });

      btn.addEventListener("click", () => {
        const userOrder = Array.from(target.children).map(li => li.textContent);
        if (userOrder.length !== originalArr.length) {
          res.textContent = "Bitte alle Teile anordnen!";
          res.style.color = "orange";
          return;
        }
        const correct = userOrder.join(" ") === originalArr.join(" ");
        if (correct) {
          res.textContent = "üéâ Richtig! Gut gemacht.";
          res.style.color = "green";
          Array.from(target.children).forEach(li => {
            li.style.background = "#FF33CC";
            li.draggable = false;
            li.style.cursor = "default";
          });
        } else {
          res.textContent = "‚ùå Leider falsch. Teile springen in 2 Sek. zur√ºck.";
          res.style.color = "red";
          setTimeout(load, 2000);
        }
      });

      load();
    });
  </script>
</body>
</html>